# Loon Auto Select Config: Automatically select the node with the lowest network latency
# This configuration file automatically selects the node with the lowest network latency without any manual intervention; the entire process is fully automated.
# Date: 2025-11-08 00:21:37
# Author: https://t.me/iKeLee

[General]
ip-mode=v4-only
ipv6-vif=off
dns-server=system
# Cloudflare and Goole DoH
doh-server=https://1.1.1.1/dns-query, https://dns.google/dns-query
sni-sniffing=true
disable-stun=true
dns-reject-mode=LoopbackIP
domain-reject-mode=DNS
udp-fallback-mode=REJECT
wifi-access-http-port=7222
wifi-access-socks5-port=7221
allow-wifi-access=false
interface-mode=auto
test-timeout=5
disconnect-on-policy-change=false
internet-test-url=http://www.msftconnecttest.com/connecttest.txt
proxy-test-url=http://www.gstatic.com/generate_204
resource-parser=https://raw.githubusercontent.com/sub-store-org/Sub-Store/release/sub-store-parser.loon.min.js
geoip-url=https://geodata.kelee.one/Country-Masaiki.mmdb
ipasn-url=https://geodata.kelee.one/GeoLite2-ASN-P3TERX.mmdb
skip-proxy=192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, e.crashlynatics.com
bypass-tun=10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32

[Proxy]

[Remote Proxy]

[Remote Filter]
HK Nodes=NameRegex, FilterKey="^(?=.*((?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|(\b(HK|HKG|Hong)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"
TW Nodes=NameRegex, FilterKey="^(?=.*((?i)ğŸ‡¹ğŸ‡¼|å°æ¹¾|(\b(TW|TWN|Tai|Taiwan)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"
JP Nodes=NameRegex, FilterKey="^(?=.*((?i)ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|(\b(JP|JPN|Japan)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"
KR Nodes=NameRegex, FilterKey="^(?=.*((?i)ğŸ‡°ğŸ‡·|éŸ©å›½|éŸ“|é¦–å°”|(\b(KR|KOR|Korea)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"
SG Nodes=NameRegex, FilterKey="^(?=.*((?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|(\b(SG|SGP|Singapore)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"
US Nodes=NameRegex, FilterKey="^(?=.*((?i)ğŸ‡ºğŸ‡¸|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|(\b(US|USA|United States)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"
Gaming Nodes=NameRegex, FilterKey="^(?=.*((?i)æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­)).*$"
Global Nodes=NameRegex, FilterKey="^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|è¶…æ—¶|æ”¶è—|ç¦åˆ©|é‚€è¯·|å¥½å‹|å¤±è”|(\b(USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author|Traffic)(\d+)?\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$"

[Proxy Group]
# Auto-select the lowest latency node
HKÂ·Lowest latency=url-test, HK Nodes, interval=60, tolerance=50, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png
TWÂ·Lowest latency=url-test, TW Nodes, interval=60, tolerance=50, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png
JPÂ·Lowest latency=url-test, JP Nodes, interval=60, tolerance=50, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png
KRÂ·Lowest latency=url-test, KR Nodes, interval=60, tolerance=50, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/KR.png
SGÂ·Lowest latency=url-test, SG Nodes, interval=60, tolerance=50, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png
USÂ·Lowest latency=url-test, US Nodes, interval=60, tolerance=50, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png
# --------------------------------
# Final strategy fallback
Final Fallback=fallback, HKÂ·Lowest latency, TWÂ·Lowest latency, JPÂ·Lowest latency, KRÂ·Lowest latency, SGÂ·Lowest latency, USÂ·Lowest latency, interval=60, max-timeout=2000, img-url=https://github.com/shindgewongxj/WHATSINStash/raw/main/icon/fallback.png
# --------------------------------
# Manually select node strategy group
Gaming Select=select, Gaming Nodes, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Static.png
Global Select=select, Global Nodes, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Static.png

[Rule]
# Local Rule
# Type:DOMAIN-SUFFIX,DOMAIN,DOMAIN-KEYWORD,USER-AGENT,URL-REGEX,IP-CIDR,IP-CIDR6,IP-ASN
# Strategy:DIRECT,PROXY,REJECT
# Options:no-resolve(only for cidr)
# IP-CIDR, 192.168.0.0/16, DIRECT
# IP-CIDR, 10.0.0.0/8, DIRECT
# IP-CIDR, 172.16.0.0/12, DIRECT
# IP-CIDR, 127.0.0.0/8, DIRECT
# Replace "us" in the following line with the English abbreviation of your country.
GEOIP, us, DIRECT
# This line below does not need any modification.
FINAL, Final Fallback

[Remote Rule]
https://rule.kelee.one/Loon/Telegram.lsr, policy=Final Fallback, tag=Telegram, enabled=true
https://kelee.one/Tool/Loon/Lsr/TikTok.lsr, policy=Global Select, tag=TikTok, enabled=true
https://kelee.one/Tool/Loon/Lsr/AI.lsr, policy=Global Select, tag=AI, enabled=true
https://kelee.one/Tool/Loon/Lsr/ApplePushNotificationService.lsr, policy=DIRECT, tag=Apple Push Notification Service, enabled=true
https://kelee.one/Tool/Loon/Lsr/AppleAccount.lsr, policy=DIRECT, tag=Apple Account, enabled=true
https://kelee.one/Tool/Loon/Lsr/AppStore.lsr, policy=DIRECT, tag=App Store, enabled=false
https://rule.kelee.one/Loon/GitHub.lsr, policy=Final Fallback, tag=GitHub, enabled=true
https://rule.kelee.one/Loon/Netflix.lsr, policy=SGÂ·Lowest latency, tag=Netflix, enabled=true
https://rule.kelee.one/Loon/YouTube.lsr, policy=Final Fallback, tag=Youtube, enabled=true
https://rule.kelee.one/Loon/Disney.lsr, policy=Final Fallback, tag=Disney, enabled=true
https://rule.kelee.one/Loon/Twitter.lsr, policy=Final Fallback, tag=Twitter, enabled=true
https://rule.kelee.one/Loon/Facebook.lsr, policy=Final Fallback, tag=Facebook, enabled=true
https://rule.kelee.one/Loon/Instagram.lsr, policy=USÂ·Lowest latency, tag=Instagram, enabled=true
https://rule.kelee.one/Loon/Spotify.lsr, policy=Final Fallback, tag=Spotify, enabled=true
https://rule.kelee.one/Loon/Google.lsr, policy=Final Fallback, tag=Google, enabled=true
https://rule.kelee.one/Loon/OneDrive.lsr, policy=Final Fallback, tag=OneDrive, enabled=true
https://kelee.one/Tool/Loon/Lsr/LAN_SPLITTER.lsr, policy=DIRECT, tag=LAN, enabled=true

[Host]

[Rewrite]

[Script]

[Plugin]
https://kelee.one/Tool/Loon/Lpx/Spotify_remove_ads.lpx, enabled=true
https://kelee.one/Tool/Loon/Lpx/YouTube_remove_ads.lpx, enabled=true
https://kelee.one/Tool/Loon/Lpx/QuickSearch.lpx, enabled=false
https://kelee.one/Tool/Loon/Lpx/Prevent_DNS_Leaks.lpx, policy=Final Fallback, enabled=true
https://kelee.one/Tool/Loon/Lpx/Node_detection_tool.lpx, enabled=true
https://kelee.one/Tool/Loon/Lpx/Spotify_lyrics_translation.lpx, enabled=true
https://kelee.one/Tool/Loon/Lpx/Google.lpx, enabled=false
https://kelee.one/Tool/Loon/Lpx/BoxJs.lpx, policy=Final Fallback, enabled=true
https://kelee.one/Tool/Loon/Lpx/Sub-Store.lpx, policy=Final Fallback, enabled=true

[Mitm]
hostname=
ca-p12=
ca-passphrase=
skip-server-cert-verify=false